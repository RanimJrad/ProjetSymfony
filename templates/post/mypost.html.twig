{% extends 'base.html.twig' %}

{% block title %}Mes publications{% endblock %}

{% block body %}
<style>
    
    img{
        border-radius: 10px;
    }

    .posts{
        padding: 40px;
        margin-bottom: 40;
        margin-top:40px;
        width:600px;
        margin-bottom: 60px;
        margin-left: 350px;
        border-radius: 10px;
        box-shadow: 2px 2px 4px 4px #92b8db; 
    }
</style>
{% for message in app.flashes('success') %}
        <div class="alert alert-success mt-5 text-center" style="border-radius:10px;">
            {{ message }}
        </div>
{% endfor %}
{% for post in posts %}
    {% if app.user == post.author %}       
        <section class="posts">
            <article>
                <span class="badge" style="background-color:#DB6A8F;border-radius:20px;color:black;height:50px;width:160px;margin-left:400px;"><p style="margin-top:15px;">{{ post.category.title }}</p></span>
                <h2 style="color:#92b8db;margin-top:-50px;">{{ post.title }}</h2>
                <div class="metadate">
                    {% if post.author %}
                            {{ post.author.firstName }} {{ post.author.lastName }}
                    {% else %}
                            utilisateur
                    {% endif %}
                    <br>
                    {{ post.createdAt | date('Y-m-d')}} Ã  {{ post.createdAt | date('H:i') }}
                </div>
                    <div class="content">
                        {% if post.imageName %}
                            <img src="{{ vich_uploader_asset(post, 'imageFile') }}" width="300" height="200" alt="" class="mt-3 mb-3" style="margin-left:80px;">
                        {% else %}
                            <img src="https://picsum.photos/seed/picsum/300/200" alt="" class="mt-3 mb-3">
                        {% endif %}
                        <p>{{ post.content }}</p><hr>
                        {{ post.comments | length  }} {{ (post.comments | length <= 1) ? 'Commentaire' : 'Commentaires' }}<br><hr>
                        <a href="{{ path('post_show', {'id' : post.id}) }}"><span style="color:#DB6A8F;">En savoir plus</span></a>
                        <br><hr>
                            <a href="{{ path('post_edit', {'id': post.id}) }}" class="btn mt-2 " style="margin-left:150px;background-color:#FE895E;color:black;border-radius:10px;">Modifier</a>
                            <a href="{{ path('delete_post', {'id': post.id}) }}" class="btn " style="margin-left:300px;background-color:#FE277E;color:black;border-radius:10px;margin-top:-65px;">Supprimer</a>
                        
                    </div>
            </article>
        </section>
    {% endif %}
{% endfor %}
{% endblock %}